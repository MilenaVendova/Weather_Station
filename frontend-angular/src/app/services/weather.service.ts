// üîß –¢–æ–≤–∞ –µ —Å–µ—Ä–≤–∏—Å—ä—Ç - –∫–∞—Ç–æ –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ–π—Ç–æ –Ω–æ—Å–∏ –¥–∞–Ω–Ω–∏ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ
import { Injectable } from '@angular/core'; // üíâ –í–∑–∏–º–∞–º–µ "–∏–Ω–∂–µ–∫—Ü–∏—è—Ç–∞" - —Å–ø–µ—Ü–∏–∞–ª–Ω–∞ Angular –º–∞–≥–∏—è
import { HttpClient } from '@angular/common/http'; // üìû –í–∑–∏–º–∞–º–µ "—Ç–µ–ª–µ—Ñ–æ–Ω–∞" –∑–∞ –≥–æ–≤–æ—Ä–µ–Ω–µ —Å—ä—Å —Å—ä—Ä–≤—ä—Ä–∞
import { Observable, catchError, of } from 'rxjs'; // üé≠ –í–∑–∏–º–∞–º–µ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –∑–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
import { WeatherInfo } from '../models/weather.model'; // üìã –í–∑–∏–º–∞–º–µ –Ω–∞—à–∞—Ç–∞ "—Ñ–æ—Ä–º–∏—á–∫–∞" –∑–∞ –≤—Ä–µ–º–µ—Ç–æ

// üè∑Ô∏è –î–µ–∫–æ—Ä–∞—Ç–æ—Ä - –∫–∞–∑–≤–∞ –Ω–∞ Angular, —á–µ —Ç–æ–≤–∞ –µ —Å–µ—Ä–≤–∏—Å
@Injectable({ // –°–ª–∞–≥–∞–º–µ –µ—Ç–∏–∫–µ—Ç "–ê–∑ —Å—ä–º —Å–µ—Ä–≤–∏—Å!"
  providedIn: 'root' // üå≥ –ö–∞–∑–≤–∞–º–µ: "–¢–æ–∑–∏ —Å–µ—Ä–≤–∏—Å –µ –¥–æ—Å—Ç—ä–ø–µ–Ω –Ω–∞–≤—Å—è–∫—ä–¥–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ"
}) // –ö—Ä–∞–π –Ω–∞ –µ—Ç–∏–∫–µ—Ç–∞

// üå¶Ô∏è –ö–ª–∞—Å—ä—Ç WeatherService - –Ω–∞—à–∏—è—Ç –ø–æ–º–æ—â–Ω–∏–∫ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ
export class WeatherService { // –ó–∞–ø–æ—á–≤–∞–º–µ –¥–∞ –ø—Ä–∞–≤–∏–º –ø–æ–º–æ—â–Ω–∏–∫–∞
  // üè† URL –∞–¥—Ä–µ—Å—ä—Ç –Ω–∞ backend API-—Ç–æ (–∫–∞—Ç–æ –¥–æ–º–∞—à–µ–Ω –∞–¥—Ä–µ—Å –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞)
  private apiUrl = 'http://localhost:5240/weather'; // –ó–∞–ø–æ–º–Ω—è–º–µ –∫—ä–¥–µ –∂–∏–≤–µ–µ —Å—ä—Ä–≤—ä—Ä—ä—Ç

  // üî® –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä - —Å–ø–µ—Ü–∏–∞–ª–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å–∞
  constructor(private http: HttpClient) { } // –ü–æ–ª—É—á–∞–≤–∞–º–µ HttpClient –∫–∞—Ç–æ –ø–æ–¥–∞—Ä—ä–∫ –æ—Ç Angular

  /**
   * üåç –í–∑–∏–º–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –≤—Ä–µ–º–µ—Ç–æ –∑–∞ –¥–∞–¥–µ–Ω–∞ –¥—ä—Ä–∂–∞–≤–∞
   * @param country - –∫–æ–¥—ä—Ç –Ω–∞ –¥—ä—Ä–∂–∞–≤–∞—Ç–∞ (–Ω–∞–ø—Ä. 'bulgaria', 'uk')
   * @returns Observable —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è—Ç–∞ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ (–∫–∞—Ç–æ –æ–±–µ—â–∞–Ω–∏–µ –∑–∞ –¥–∞–Ω–Ω–∏)
   */
  getWeather(country: string): Observable<WeatherInfo | null> { // –§—É–Ω–∫—Ü–∏—è, –∫–æ—è—Ç–æ –≤–∑–∏–º–∞ –≤—Ä–µ–º–µ—Ç–æ
    // üì§ –ü—Ä–∞–≤–∏–º –∑–∞—è–≤–∫–∞ –∫—ä–º —Å—ä—Ä–≤—ä—Ä–∞
    return this.http.get<WeatherInfo>(`${this.apiUrl}/${country}`) // –ó–≤—ä–Ω–∏–º –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞ –∏ –ø–∏—Ç–∞–º–µ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ
      .pipe( // üö∞ –ò–∑–ø–æ–ª–∑–≤–∞–º–µ "—Ç—Ä—ä–±–∞" –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∞
        catchError(error => { // ü™§ –ê–∫–æ —Ö–≤–∞–Ω–µ–º –≥—Ä–µ—à–∫–∞...
          console.error('–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ –∑–∞ –≤—Ä–µ–º–µ—Ç–æ:', error); // üì¢ –í–∏–∫–∞–º–µ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞
          // ü§∑ –í—Ä—ä—â–∞–º–µ null –ø—Ä–∏ –≥—Ä–µ—à–∫–∞ (–ø—Ä–∞–∑–Ω–∏ —Ä—ä—Ü–µ)
          return of(null); // –ö–∞–∑–≤–∞–º–µ "—Å—ä–∂–∞–ª—è–≤–∞–º, –Ω—è–º–∞–º –¥–∞–Ω–Ω–∏"
        }) // –ö—Ä–∞–π –Ω–∞ —Ö–≤–∞—â–∞–Ω–µ—Ç–æ –Ω–∞ –≥—Ä–µ—à–∫–∏
      ); // –ö—Ä–∞–π –Ω–∞ —Ç—Ä—ä–±–∞—Ç–∞
  } // –ö—Ä–∞–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ getWeather
} // –ö—Ä–∞–π –Ω–∞ –∫–ª–∞—Å–∞ WeatherService
